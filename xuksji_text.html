<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name=App-Config content="fullscreen=yes,useHistoryState=yes,transition=yes">
    <meta content=yes name=apple-mobile-web-app-capable>
    <meta name=â€apple-touch-fullscreenâ€ content=â€yesâ€>
    <meta name="theme-color" content="#1a1a1a">
    <meta content="telephone=no,email=no" name=format-detection>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name=viewport
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=yes,viewport-fit=cover">
    <title></title>
    <link rel="stylesheet" href="css/content.css">
    <style>
        .B1_text p {
            padding: 10px 0;
        }

        .B1_text .header {
            font-size: 18px;
            text-align: right;
        }

        #bodyBox {
            font-size: 26px;
        }

        #readOpt .header,
        #readOpt .footer {
            font-size: 18px;
        }

        #menu .curr-pos {
            font-weight: inherit;
            color: inherit;
        }

        .curr {
            font-weight: bolder;
            color: #993300;
        }
    </style>
</head>

<body>
    <div id="app" v-cloak :class="'bg'+theme" class="theme">
        <!-- ç¿»é¡µ -->
        <!-- <template v-if="isPage">
            <div class="page-box up" @click="pageUp"></div>
            <div class="page-box down" @click="pageDown(1)"></div>
        </template> -->

        <!-- ç›®å½• -->
        <div id="menu" v-swipeleft="clickHideMenu" class="list-group" :class="{'show-a': showMenu}"
            @dblclick.stop="clickHideMenu">
            <div>
                <div class="search-box" v-if="len>15">
                    <input type="search" class="form-control search" @input="search" @keyup.enter="enterSearch"
                        v-model="word" placeholder="æœç´¢...">
                </div>
                <div :class="{'curr-pos': len>15}">
                    <div class="fx">
                        <span class="list-group-item fz book" :class="{active: item.id==theme}"
                            v-for="(item, index) in themeL" @click.stop="changeTheme(item)"
                            :key="item.id">{{item.n}}</span>
                        <span class="list-group-item fz book" @click.stop="switchDark">
                            <i class="zhe"></i>
                            <input class="switch" type="checkbox" v-model='isDark'>ç³»ç»Ÿ</span>
                    </div>
                    <div class="fx">
                        <span @click.stop="switchPage" class="list-group-item fz book"><i class="zhe"></i><input
                                class="switch" type="checkbox" v-model='isPage'>ç¿»é¡µ</span>
                        <span @click.stop="switchOrder" class="list-group-item fz book"><i class="zhe"></i><input
                                class="switch" type="checkbox" v-model='isReverse'>å€’åº</span>
                        <span class="list-group-item fz book" v-if="len>5">å…±:{{len}}ç« </span>
                        <span class="list-group-item fz book" @click="getAllTotal">æ€»: {{total('',allTotal)}}</span>
                    </div>
                    <div class="list-group-item fz book curr" @click="toTop">
                        <!-- {{subProcess}}- -->
                        ä½ç½®ï¼š{{currIdx+1}}-{{articleD.title}}({{articleD.total}})
                    </div>
                </div>

                <!-- ç›®å½•åˆ—è¡¨ -->
                <div class="menu-item" v-for="(item, idx) in menuList" :key="item.id" v-show="!item.hide"
                    :id="'m'+item.id">
                    <a class="list-group-item " href="javascript:" @click="toArticle(item.idx);"
                        :class="['list-group-item-'+colors[idx%4],{active: item.idx===currIdx}]">
                        {{item.idx+1}}--{{item.title}}
                        <span v-if="item.articleD">({{item.articleD.total}})</span>
                    </a>
                </div>
                <!-- å­—ä½“å¤§å°è®¾ç½® -->
                <div>
                    <span class="list-group-item fz" :key="item" :class="{'active': item == currFontS}"
                        v-for="item in font" @click="setFontS(item)">{{item}}
                    </span>

                </div>
                <div>
                    <span class="list-group-item fz">å½“å‰å­—å·ï¼š{{ currFontS }}</span>
                    <span class="list-group-item  fz" @click="setFontS('+')">+</span>
                    <span class="list-group-item fz" @click="setFontS('-')">-</span>
                </div>
                <!-- å­—ä½“è®¾ç½® -->
                <div>
                    <span class="list-group-item fz" :key="item" :class="{'active': item.v == currFontF}"
                        v-for="(item) in fontF" @click="setFontF(item)">{{item.n}}
                    </span>
                </div>

            </div>
        </div>

        <!-- å†…å®¹ -->
        <div id="bodyBox" v-show="articleD.html">
            <div class="panel-footer page-tap prev" @click.stop="pageNext('-')" v-if="currIdx-1>=0">
                ä¸Šä¸€ç«  - {{subTit(menuList[currIdx-1]['title'])}}
                <span @click.stop="pageNext('+')" v-if="currIdx+1<len">ä¸‹ä¸€ç« </span>
            </div>
            <div class="body-box" @dblclick.capture="clickShowMenu()">
                <div :class="['panel','panel-'+colors[currIdx%4]]" @click.stop="showReadOpt()">
                    <div class="panel-heading">
                        <h3 class="panel-title text-center">
                            {{articleD.title}}
                            <!-- <span class="author">ä½œè€…ï¼š</span> -->
                            <!-- <span class="author">({{item.total}})</span> -->
                        </h3>
                    </div>
                    <div class="panel-footer">
                        å‘å¸ƒæ—¶é—´ï¼š{{articleD.date}}</div>
                    <div class="panel-body" v-html="articleD.html"></div>
                </div>
            </div>
            <div class="panel-footer page-tap next" v-if="currIdx+1<len" @click.stop="pageNext('+')">
                ä¸‹ä¸€ç«  - {{subTit(menuList[currIdx+1]["title"])}}
            </div>
        </div>

        <!-- è®¾ç½® -->
        <div id="readOpt" @click.capture="hideReadOpt" @touchend="getP" :class="{active: showOpt}">
            <div class="header" v-if="currItem">
                <span class="h-l" @click="switchTheme">
                    <template v-if="theme == 4">ğŸ”†</template><template v-else>ğŸŒ™</template>
                </span>
                {{subTit(currItem.title)}}
                <span class="h-r" @click="clickShowMenu()">ç›®å½•</span>
            </div>
            <div class="footer">
                <div class="f-item">
                    <span>å­—ï¼š{{articleD.total}} -- è¿›ï¼š{{process}} -- {{read_time}}</span>
                </div>
                <!-- <span class="f-page">{{pageCurr}}/{{pageAll}}</span> -->
            </div>
        </div>
    </div>
</body>
<script src="js/comm.js"></script>
<script src="js/touch.js"></script>
<script src="js/jq.js"></script>
<script>
    var that;
    var id = $echo.getParams('id');
    var key = $echo.getParams('key');
    new Vue({
        el: '#app',
        data: {
            title: 'è™šç©ºæµ',
            apiUrl: 'https://api2022.xukongji.com',
            articleD: {}, // æ‰€æœ‰æ•°æ®åˆ—è¡¨
            menuList: [], // èœå•åˆ—è¡¨
            len: 0,
            colors: ['success', 'info', 'warning', 'danger'],
            showMenu: false, // åˆ‡æ¢æ˜¾ç¤ºèœå•
            font: [20, 22, 24, 26, 28, 30],
            fontF: [
                { n: 'é»˜è®¤', v: 'inherit' },
                { n: 'æ¥·ä½“1', v: 'kt1' },
                { n: 'æ¥·ä½“2', v: 'kt2' },
                { n: 'ç››ä¸–', v: 'ss' },
                { n: 'ä»Šæ¥·', v: 'jk' },
                { n: 'äº‘é»‘', v: 'yh' },
                { n: 'è¡Œé»‘', v: 'xh' },
                { n: 'å¡é€š', v: 'kt' }
            ],
            currFontS: 26,
            currFontF: 'inherit',
            footMenu: [{
                n: 'è®¾ç½®'
            }],
            themeL: [{ // ä¸»é¢˜
                n: 'é˜…è¯»',
                id: 1
            }, {
                n: 'å¤é£',
                id: 2
            }, {
                n: 'ç™½å¤©',
                id: 3
            }, {
                n: 'å¤œæ™š',
                id: 4
            }],
            theme: 1, // 1é»˜è®¤ï¼Œ1ï¼Œbg1,bg2
            process: 0, // å½“å‰é˜…è¯»è¿›åº¦
            allTotal: 0,// æ€»å­—æ•°
            word: '', // æœç´¢ç›®å½•å…³é”®å­—
            height: 0,// å±å¹•çš„é«˜åº¦
            isDark: false, // é»˜è®¤ç³»ç»Ÿä¸»é¢˜
            isReverse: false, // é»˜è®¤ç›®å½•æ’åº
            isPage: false, // æ˜¯å¦å¼€å¯ç¿»é¡µ
            currItem: '', // å½“å‰æ ‡é¢˜åç§°
            currIdx: '', // å½“å‰ç´¢å¼•
            showOpt: false, // æ˜¯å¦æ˜¾ç¤ºè®¾ç½®
            dbTime: null, // åŒå‡»å•æœºæ—¶é—´è®¡æ—¶å™¨
            processTime: null, // è·å–ç™¾åˆ†æ¯”è®¡æ—¶å™¨
            xkj_text: {}, // æœ¬åœ°id
            read_time: '0', // é˜…è¯»æ—¶é—´
            readtimer: null,        // é˜…è¯»æ—¶é—´å®šæ—¶å™¨

        },
        methods: {
            // è·å–htmlè¯·æ±‚å‡½æ•°
            getHtml: function (url) {
                return new Promise((r, s) => {
                    $.ajax({
                        type: "GET",
                        url: url,
                        async: false,
                        cache: false,
                        contentType: "application/x-www-form-urlencoded",
                        dataType: "html",
                        success: function (res) {
                            r(res)
                        },
                        error: function (res) {
                            if (res.status === 404) {
                                alert('å½“å‰ç½‘é¡µç»´æŠ¤ä¸­...ï¼Œè¯·ç‚¹å‡»ç¡®å®šå…³é—­')
                                window.close();
                            } else {
                                alert('å½“å‰ç½‘é¡µå‡ºé”™ï¼ï¼ï¼')
                                window.close();
                            }

                        }
                    });
                })

            },

            // è·³è½¬åˆ°é¡¶éƒ¨
            toTop: function () {
                // window.scrollTo(0, 0);
                var mid = document.getElementById('m' + this.currItem.id);
                var menu = document.getElementById('menu');
                menu.scrollTop = mid.offsetTop - 240
            },

            // è£å‰ªæ ‡é¢˜
            subTit: function (title) {
                return title.slice(0, 20)
            },

            // è®¡ç®—æ€»æ•°
            total: function (str, n) {
                if (n) {
                    if (n >= 1000 && n < 10000) {
                        n = n / 1000 + 'k'
                    } else if (n >= 10000) {
                        n = n / 10000 + 'w'
                    }
                    return n;
                }
                var num = 0
                for (i = 0; i < str.length; i++) {
                    s = str.charAt(i)
                    if ('\u4e00' <= s && s <= '\u9fef') {
                        num += 1;
                    }
                }
                if (num >= 1000 && num < 10000) {
                    s = num / 1000 + 'k'
                } else if (num >= 10000) {
                    s = num / 10000 + 'w'
                } else {
                    s = num
                }
                return { s: s, n: num };
            },

            getAllTotal: function () {
                this.menuList.forEach((item, idx) => {
                    if (!item.articleD) {
                        setTimeout(() => {
                            this.getArticle(item, true);
                        }, idx * 30)
                    }
                })

            },

            // è®¾ç½®å­—ä½“å¤§å°
            setFontS: function (size) {
                if (size == '+') {
                    s = (s + 1)
                } else if (size == '-') {
                    s = (s - 1)
                } else {
                    s = size;
                }
                var dom = document.querySelector('#bodyBox');
                dom.style.fontSize = s + 'px';

                // ç”±äºå­—ä½“æ”¹å˜åé¡µé¢é«˜åº¦å˜åŒ–ï¼Œéœ€è¦å»¶è¿Ÿé‡æ–°è®¡ç®—å›åˆ°å½“å‰ä½ç½®
                this.currFontS = s;
                $echo.setStorage('fontSize', this.currFontS);
            },

            // æ˜¾ç¤ºèœå•åˆ‡æ¢
            clickShowMenu: function () {
                this.showMenu = true;
                setTimeout(this.hideReadOpt, 200)
            },

            // å‘å·¦æ»‘åŠ¨éšè—èœå•
            clickHideMenu: function () {
                this.showMenu = false
            },

            // æ¸…ç©ºè®¾ç½®
            reset: function (s) {
                var is = window.confirm('æ˜¯å¦æ¸…ç©ºï¼Ÿ')
                if (is) {
                    if (s === 's') {
                        localStorage.removeItem('localInfo_' + type)
                        sessionStorage.clear();
                    } else if (s === 'c') {
                        INDEXDB.deleteItem(type);
                    }
                }
            },

            // æœç´¢ç›®å½•
            search: function () {
                this.menuList.forEach((item, id) => {
                    if ((id + 1 + '--' + item.title).indexOf(this.word) > -1) {
                        item.hide = false;
                    } else {
                        item.hide = true;
                    }
                })
            },
            // å›è½¦
            enterSearch: function () {

            },

            // åˆ‡æ¢æ’åºå€’åº
            switchOrder: function () {
                this.isReverse = !this.isReverse
                this.menuList.reverse();
            },

            // è®¾ç½®ä¸»é¢˜
            changeTheme: function (item) {
                this.theme = item.id
                $echo.setStorage('theme', this.theme);
            },

            // è®¾ç½®å­—ä½“
            setFontF: function (item) {
                if (item) {
                    this.currFontF = item.v;
                    $echo.setStorage('font', this.currFontF);
                }
                setTimeout(() => {
                    document.body.style.fontFamily = this.currFontF
                }, 16)
            },

            // å¼€å¯è·Ÿéšç³»ç»Ÿä¸»é¢˜
            switchDark: function () {
                this.isDark = !this.isDark;
                if (this.isDark && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.theme = 4;
                } else {
                    this.theme = localStorage.theme;
                }
                localStorage.setItem('isDark', this.isDark)
            },

            // åˆ‡æ¢ç™½å¤©å’Œé»‘å¤œ
            switchTheme: function () {
                if (this.theme === 4) {
                    this.theme = 1;
                } else {
                    this.theme = 4;
                }
            },

            // å¼€å¯ç¿»é¡µ
            switchPage: function () {
                this.isPage = !this.isPage;
            },

            // æ˜¾ç¤ºé˜…è¯»è®¾ç½®
            showReadOpt: function (id, item) {
                if (window.getSelection().toString() !== '') return false;
                clearTimeout(this.dbTime);
                // åŒå‡»èœå•å’Œå•æœºèœå•å®šæ—¶å™¨å†²çª
                if (this.showOpt) {
                    this.showOpt = false;
                } else {
                    this.dbTime = setTimeout(() => {
                        this.showOpt = true;
                        this.getProcess(); // è®¡ç®—è¿›åº¦æ¡
                        this.savePos(); // ä¿å­˜ä¸€æ¬¡ä½ç½®
                        clearTimeout(this.dbTime); 
                        // å®šæ—¶è®¡ç®—è¿›åº¦æ¡
                        this.dbTime = setInterval(()=> {
                            this.getProcess();
                        }, 5000)
                    }, 220)
                }

            },

            // éšè—é˜…è¯»è®¾ç½®
            hideReadOpt: function () {
                clearTimeout(this.dbTime);
                this.showOpt = false;
            },

            // è·³è½¬æ–‡ç« 
            toArticle: function (idx) {
                window.scrollTo(0, 0); // è·³è½¬åˆ°æ–‡ç« é¡¶éƒ¨
                if (this.currIdx === idx) return false;
                this.menuList.some((item)=>{
                    if(item.idx === idx) this.currItem = item;
                })
                this.currIdx = idx;
                this.saveText();  // ä¿å­˜æœ¬åœ°
                if (this.currItem.articleD) {
                    this.articleD = this.currItem.articleD;
                    document.title = this.articleD.title;
                } else {
                    this.getArticle(this.currItem);
                }
            },
            // ä¸‹ä¸€ç«  // ä¸Šä¸€ç« 
            pageNext: function (type) {
                if (type === '+') {
                    this.toArticle(this.currIdx + 1)
                } else if (type === '-') {
                    this.toArticle(this.currIdx - 1)
                }
            },

            // è·å–html
            getArticle: function (currItem, isAll) {
                new Promise((r, s) => {
                    var re3 = /[\r\n\f\t]|(<\/?br\/?>)+|\sstyle=".*?"|(&nbsp;)|<strong>[\s\t\r\f\n]*<\/strong>|<span>[\s\t\r\f\n]*<\/span>|<p>[\s\t\r\f\n]*<\/p>|<div>[\s\t\r\f\n]*<\/div>/img
                    if (key === 'brws') {
                        var path = 'https://www.shishengru.com' + currItem.id;
                        this.getHtml(path).then(res => {
                            var reimg = /<img.*?>/img
                            res = res.replace(reimg, '')
                            $doc = $(res);
                            var html = $doc.find('.article-content').html();
                            var date = $doc.find('.f-reveal-time strong').eq(2).text();
                            while (html.match(re3)) {
                                html = html.replace(re3, "");
                            }
                            r({ html: html, date: date })
                        })
                    } else if (key === 'xkj') {
                        var path = this.apiUrl + '/api/article/menuInfoWeb?id=' + currItem.id;
                        this.getHtml(path).then(res => {
                            while (res.match(re3)) {
                                res = res.replace(re3, "");
                            }
                            var re_all = /<article class=\"article\">.*<\/article>/mgi;  // æ–‡ç« éƒ¨åˆ†
                            var re_article = /<div class=\"content\">.*<\/div>/img  // æ­£æ–‡éƒ¨åˆ†
                            var re_date = /\d+-\d+-\d+(\s+\d+:\d+)?/img
                            var html = res.match(re_all)[0]
                            var date = html.match(re_date)[0]
                            html = html.match(re_article)[0] // æ­£æ–‡
                            r({ html: html, date: date })
                        })
                    }
                }).then((res) => {
                    html = res.html;
                    date = res.date;
                    html = '<div class="B1_text">' + html + '</div>'
                    var total = this.total(html);
                    this.allTotal += total.n; // è®¡ç®—æ€»å­—æ•°
                    // è®¾ç½®å­—æ•°åˆ°ç›®å½•ä¸Š
                    var title = currItem.title;
                    var articleD = { 'title': title, 'html': html, 'date': date, 'total': total.s }
                    if (!isAll) {
                        this.articleD = articleD;
                        document.title = title;
                    }
                    this.$set(currItem, 'articleD', articleD); // æŠŠé¡µé¢æ•°æ®èµ‹ç»™èœå•ä¸Š
                    this.setReadTime(); // å¼€å¯é˜…è¯»æ—¶é—´
                })
            },

            // è·å–é˜…è¯»æ—¶é—´
            setReadTime: function () {
                clearInterval(this.readtimer);
                var n = 0;
                this.readtimer = setInterval(() => {
                    ++n;
                    this.read_time = this.getTimes(n)
                }, 1000)
            },

            getTimes: function (t) {
                var h = parseInt(t / 60 / 60 % 24)
                var m = parseInt(t / 60 % 60)
                var s = parseInt(t % 60)
                //ä¸‰å…ƒè¡¨è¾¾å¼ è¡¥é›¶ å¦‚æœå°äº10 åˆ™åœ¨å‰è¾¹è¿›è¡Œè¡¥é›¶ å¦‚æœå¤§äº10 åˆ™ä¸éœ€è¦è¡¥é›¶
                // h = h < 10 ? '0' + h : h
                // m = m < 10 ? '0' + m : m
                // s = s < 10 ? '0' + s : s
                h = h ? h + 'æ—¶:' : '';
                m = m ? m + 'åˆ†:' : '';
                s = s + 'ç§’';
                return h + m + s
            },

            // ä¿å­˜æœ¬åœ°è§†é¢‘ä½ç½®
            saveText: function () {
                var xkj_text = localStorage.getItem('xkj_text');
                if (xkj_text) this.xkj_text = JSON.parse(xkj_text);
                this.xkj_text['t' + id] = this.currItem.id;
                localStorage.setItem('xkj_text', JSON.stringify(this.xkj_text))
            },

            // è®¡ç®—å½“å‰ä½ç½®çš„ç™¾åˆ†æ¯”æ•°å­—
            getProNum: function () {
                var elH = document.documentElement.scrollHeight || document.body.scrollHeight; // å½“å‰ç« èŠ‚é«˜åº¦
                var scrollTop = document.documentElement.scrollTop; // æ»šåŠ¨é«˜åº¦
                var p = (scrollTop) / (elH - this.height);
                p = p.toFixed(6);
                p = parseFloat(p);
                return p;
            },

            // è·³è½¬
            toPos: function (p) {
                p = parseFloat(p);
                this.$nextTick(() => {
                    var elH = document.documentElement.scrollHeight || document.body.scrollHeight; // å½“å‰ç« èŠ‚é«˜åº¦
                    var scrollTop = p * (elH - this.height);
                    window.scrollTo(0, scrollTop);
                })
            },

            // è®¡ç®—é˜…è¯»ç™¾åˆ†æ¯”
            getProcess: function () {
                p = this.getProNum();
                p = p >= 1 ? 1 : p;
                p = (p * 100).toFixed(2)
                if (p == 0) {
                    p = 0;
                } else if (p >= 100) {
                    p = 100;
                }
                this.process = p + '%';

            },

            savePos: function () {
                this.xkj_text['tn' + id] = this.getProNum();
                localStorage.setItem('xkj_text', JSON.stringify(this.xkj_text))
            },

            getP: function () {
                clearInterval(this.processTime);
                this.processTime = setTimeout(() => {
                    this.getProcess();
                }, 600)
            },


            // è·å–å½“å‰åˆ—è¡¨
            getArticleList: function () {
                var menu = [];
                var idxs = 0;
                var re = /ã€Š.*?ã€‹|ï¼ˆ.*?ï¼‰/img
                new Promise((r, s) => {
                    if (key === 'brws') {
                        var path = 'https://www.shishengru.com' + id;
                        this.getHtml(path).then(res => {
                            var xkj_text = localStorage.getItem('xkj_text');
                            if (xkj_text) this.xkj_text = JSON.parse(xkj_text);
                            var reimg = /<img.*?>/img
                            res = res.replace(reimg, '')
                            $box = $(res).find('.f-article-text > span')
                            $box.each(function (idx) {
                                title = $(this).find('a').text();
                                href = $(this).find('a').attr('href');
                                menu.push({
                                    'title': title,
                                    'id': href,
                                    'idx': idx
                                })
                            })
                            r(menu)
                        })

                    } else if (key === 'xkj') {
                        var path = this.apiUrl + '/api/article/menu';
                        var body = JSON.stringify({ "a_id": id });
                        var opt = { method: "post", body: body };
                        $echo.getJson(path, opt).then((res) => {
                            res = res['data'];
                            var xkj_text = localStorage.getItem('xkj_text');
                            if (xkj_text) this.xkj_text = JSON.parse(xkj_text);

                            res.forEach((item, idx) => {
                                item.title = item.title.replace(re, '');
                                item.idx = idx;
                                if (this.xkj_text['t' + id] == item.id) {
                                    idxs = idx;
                                }
                            })
                            menu = res;
                            r(res);
                        })
                    }
                }).then((menu) => {
                    menu.forEach((item, idx) => {
                        item.title = item.title.replace(re, '');
                        item.idx = idx;
                        if (this.xkj_text['t' + id] == item.id) {
                            idxs = idx;
                        }
                    })
                    this.menuList = menu;
                    this.len = menu.length;
                    this.toArticle(idxs)
                })
            }
        },
        created: function () {
            that = this;
        },
        mounted: function () {
            this.height = window.screen.availHeight
            // å­—ä½“
            var font = localStorage.getItem('font')
            var fontSize = localStorage.getItem('fontSize');
            this.$nextTick(() => {
                if (font) {
                    this.currFontF = font;
                    this.setFontF();
                }
                // å­—å·
                if (fontSize) {
                    this.setFontS(fontSize)
                }
                var xkj_text = localStorage.getItem('xkj_text');
                if (xkj_text) this.xkj_text = JSON.parse(xkj_text);
                var t = setInterval(() => {
                    if (this.articleD.html) {
                        clearInterval(t); // æ¸…é™¤è®¡æ—¶å™¨
                        // è·³è½¬å·²é˜…è¯»ä½ç½®
                        this.toPos(this.xkj_text['tn' + id])
                        // å¯åŠ¨è‡ªåŠ¨ä¿å­˜
                        setInterval(() => {
                            this.savePos();
                        }, 6000);
                    }
                }, 50);

            })

            this.isDark = Boolean(eval($echo.getStorage('isDark'))); // è½¬æ¢å¸ƒå°”å€¼
            if (this.isDark) { // æ˜¯å¦å¼€å¯è·Ÿéšç³»ç»Ÿ
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.theme = 4;
                } else {
                    this.theme = 1;
                }
            } else {
                this.theme = localStorage.getItem('theme') || 1;
            }
            this.getArticleList();
        }
    })
</script>

</html>